<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Compound Quiz</title>
  <link rel="stylesheet" href="style.css">
  <script src="questions.js"></script>
  <script src="script.js"></script>
</head>
<body>
  <header>
    <h1>üìñ Compound Quiz</h1>
    <a href="index.html">‚¨ÖÔ∏è Back to Road</a>
  </header>
  <main>
    <div id="question"></div>
    <div id="answers"></div>
    <div id="status"></div>
  </main>

  <!-- Sounds -->
  <audio id="sfx-correct" src="assets/correct.mp3"></audio>
  <audio id="sfx-wrong" src="assets/wrong.mp3"></audio>
  <audio id="sfx-coin" src="assets/coins.mp3"></audio>

  <script>
    const params = new URLSearchParams(window.location.search);
    const cIndex = parseInt(params.get("c") || "0");

    // Each compound = 12 questions
    const startIndex = cIndex * 12;
    const qSet = QUESTIONS.slice(startIndex, startIndex+12);

    let current = 0;
    let coins = parseInt(localStorage.getItem("coins")||"0");
    let lives = parseInt(localStorage.getItem("lives")||"3");

    function showQ() {
      if (current >= qSet.length) {
        alert("‚úÖ Compound complete!");
        localStorage.setItem("coins", coins);
        toggleDayNight(); // switch to night if needed
        window.location.href = "index.html";
        return;
      }
      const q = qSet[current];
      document.getElementById("question").innerText = q.q;
      const ansDiv = document.getElementById("answers");
      ansDiv.innerHTML = "";
      q.choices.forEach((c,i)=>{
        const btn=document.createElement("button");
        btn.innerText=c;
        btn.onclick=()=>check(i===q.a);
        ansDiv.appendChild(btn);
      });
      updateStatus();
    }

    function check(correct) {
      if (correct) {
        const reward = Math.floor(20+Math.random()*10);
        coins += reward;
        playSound("sfx-correct");
        playSound("sfx-coin");
        alert(`Correct! +${reward} coins`);
      } else {
        lives--;
        playSound("sfx-wrong");
        playSound("sfx-hit");
        alert(`Wrong! Lives left: ${lives}`);
        if (lives<=0) {
          alert("Game Over!");
          localStorage.clear();
          window.location.href="index.html";
          return;
        }
      }
      current++;
      localStorage.setItem("coins", coins);
      localStorage.setItem("lives", lives);
      showQ();
    }

    function updateStatus(){
      document.getElementById("status").innerText =
        `Coins: ${coins} | Lives: ${lives}`;
    }

    showQ();
  </script>
</body>
</html>
